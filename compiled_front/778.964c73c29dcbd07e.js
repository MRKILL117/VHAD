"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[778],{3778:(T,d,a)=>{a.r(d),a.d(d,{RegisterModule:()=>Y});var f=a(6019),_=a(9845),o=a(7537),C=a(1859),m=a(4611),e=a(1514),l=a(7754),p=a(830),h=a(6588);function Z(t,s){1&t&&(e.TgZ(0,"span",32),e._uU(1," Ingrese su nombre "),e.qZA())}function c(t,s){1&t&&(e.TgZ(0,"span",32),e._uU(1," Minimo 6 caracteres "),e.qZA())}function F(t,s){1&t&&(e.TgZ(0,"span",32),e._uU(1," M\xe1ximo 70 caracteres "),e.qZA())}function A(t,s){1&t&&(e.TgZ(0,"span",32),e._uU(1," Nombre inv\xe1ilido "),e.qZA())}function y(t,s){if(1&t&&(e.TgZ(0,"div",30),e.YNc(1,Z,2,0,"span",31),e.YNc(2,c,2,0,"span",31),e.YNc(3,F,2,0,"span",31),e.YNc(4,A,2,0,"span",31),e.qZA()),2&t){const n=e.oxw();let r,i,u,g;e.xp6(1),e.Q6J("ngIf",null==(r=n.form.GetFormControlByName(n.registerForm,"name"))||null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==(i=n.form.GetFormControlByName(n.registerForm,"name"))||null==i.errors?null:i.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==(u=n.form.GetFormControlByName(n.registerForm,"name"))||null==u.errors?null:u.errors.maxlength),e.xp6(1),e.Q6J("ngIf",null==(g=n.form.GetFormControlByName(n.registerForm,"name"))||null==g.errors?null:g.errors.pattern)}}function N(t,s){1&t&&(e.TgZ(0,"span",32),e._uU(1," Correo inv\xe1lido "),e.qZA())}function R(t,s){1&t&&(e.TgZ(0,"span",32),e._uU(1," Favor de ingresar su correo "),e.qZA())}function q(t,s){if(1&t&&(e.TgZ(0,"div",30),e.YNc(1,N,2,0,"span",31),e.YNc(2,R,2,0,"span",31),e.qZA()),2&t){const n=e.oxw();let r,i;e.xp6(1),e.Q6J("ngIf",null==(r=n.form.GetFormControlByName(n.registerForm,"email"))||null==r.errors?null:r.errors.pattern),e.xp6(1),e.Q6J("ngIf",null==(i=n.form.GetFormControlByName(n.registerForm,"email"))||null==i.errors?null:i.errors.required)}}function I(t,s){1&t&&(e.TgZ(0,"span",32),e._uU(1," Favor de ingresar su contrase\xf1a "),e.qZA())}function U(t,s){if(1&t&&(e.TgZ(0,"div",30),e.YNc(1,I,2,0,"span",31),e.qZA()),2&t){const n=e.oxw();let r;e.xp6(1),e.Q6J("ngIf",null==(r=n.form.GetFormControlByName(n.registerForm,"password"))||null==r.errors?null:r.errors.required)}}function w(t,s){1&t&&(e.TgZ(0,"span",32),e._uU(1," Confirme la contrase\xf1a "),e.qZA())}function x(t,s){1&t&&(e.TgZ(0,"span",32),e._uU(1," Las contrase\xf1as no coinciden "),e.qZA())}function B(t,s){if(1&t&&(e.TgZ(0,"div",30),e.YNc(1,w,2,0,"span",31),e.YNc(2,x,2,0,"span",31),e.qZA()),2&t){const n=e.oxw();let r,i;e.xp6(1),e.Q6J("ngIf",null==(r=n.form.GetFormControlByName(n.registerForm,"confirmPassword"))||null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==(i=n.form.GetFormControlByName(n.registerForm,"confirmPassword"))||null==i.errors?null:i.errors.matchstring)}}function G(t,s){1&t&&(e.TgZ(0,"span"),e._uU(1,"Registrame"),e.qZA())}function J(t,s){1&t&&(e.TgZ(0,"span"),e._UZ(1,"i",33),e.qZA())}const k=[{path:"",component:(()=>{class t{constructor(n,r,i,u){this.http=n,this.form=r,this.toast=i,this.router=u,this.loading={creating:!1},this.registerForm=new o.cw({name:new o.NI("",[o.kI.required,o.kI.minLength(6),o.kI.maxLength(70),o.kI.pattern(/^[a-zA-Z\s]{1,}$/)]),email:new o.NI("",[o.kI.required,o.kI.pattern(this.form.emailRegex)]),password:new o.NI("",[o.kI.required]),confirmPassword:new o.NI("",[o.kI.required]),firstTimeConfiguration:new o.NI(!0,[])})}ngOnInit(){}RegisterUser(){if(!this.registerForm.valid)return this.toast.ShowDefaultWarning("Favor de llenar el formulario correctamente","Formulario incompleto"),void this.registerForm.markAllAsTouched();this.loading.creating=!0,this.http.Post("/Accounts/RegisterUser",{userData:this.registerForm.value}).subscribe(n=>{this.http.Post("/Accounts/Login",{credentials:this.registerForm.value}).subscribe(r=>{this.http.SetUserSession(r),this.toast.ShowDefaultSuccess("Sesi\xf3n iniciada correctamente"),this.loading.creating=!1,this.router.navigate([`/${r.role.name.toLowerCase()}/inicio`])},r=>{console.error("Error al iniciar sesi\xf3n",r),this.loading.creating=!1})},n=>{console.error("Error al hacer login",n),this.loading.creating=!1})}GetLoginRoute(){return`${this.http.hostBaseUrl}/login`}GetRecoverPasswordRoute(){return`${this.http.hostBaseUrl}/recuperar-cuenta`}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(l.O),e.Y36(p.o),e.Y36(h.k),e.Y36(_.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:50,vars:10,consts:[[1,"full-screen"],[1,"vertical-center"],[1,"w-100"],[1,"row","justify-content-center"],[1,"col-12","col-md-8","col-lg-6"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[3,"formGroup"],[1,"form-group"],["for","username"],[1,"input-container"],[1,"input-icon","zmdi","zmdi-account"],["type","text","formControlName","name","placeholder","Ingrese su nombre",1,"form-control",3,"keyup.enter"],["class","error-messages",4,"ngIf"],["for","email"],[1,"input-icon","zmdi","zmdi-email"],["type","text","formControlName","email","placeholder","Ingrese su email",1,"form-control",3,"keyup.enter"],["for","password"],[1,"input-icon","zmdi","zmdi-key"],["type","password","formControlName","password","placeholder","Ingrese su contrase\xf1a",1,"form-control",3,"input","keyup.enter"],["for","confirmPassword"],["type","password","formControlName","confirmPassword","placeholder","Confirme su contrase\xf1a",1,"form-control",3,"keyup.enter"],[1,"text-center","mt-2"],[3,"href"],[1,"text-center"],[1,"card-footer","text-right"],[1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"],[1,"error-messages"],["class","d-block",4,"ngIf"],[1,"d-block"],[1,"zmdi","zmdi-spinner","zmdi-hc-spin"]],template:function(n,r){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"h3",7),e._uU(8,"Registro"),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"form",9),e.TgZ(11,"div",10),e.TgZ(12,"label",11),e._uU(13,"Nombre"),e.qZA(),e.TgZ(14,"div",12),e._UZ(15,"i",13),e.TgZ(16,"input",14),e.NdJ("keyup.enter",function(){return r.RegisterUser()}),e.qZA(),e.qZA(),e.YNc(17,y,5,4,"div",15),e.qZA(),e.TgZ(18,"div",10),e.TgZ(19,"label",16),e._uU(20,"Email"),e.qZA(),e.TgZ(21,"div",12),e._UZ(22,"i",17),e.TgZ(23,"input",18),e.NdJ("keyup.enter",function(){return r.RegisterUser()}),e.qZA(),e.qZA(),e.YNc(24,q,3,2,"div",15),e.qZA(),e.TgZ(25,"div",10),e.TgZ(26,"label",19),e._uU(27,"Contrase\xf1a"),e.qZA(),e.TgZ(28,"div",12),e._UZ(29,"i",20),e.TgZ(30,"input",21),e.NdJ("input",function(){return r.form.OnPasswordChange(r.registerForm,"password","confirmPassword")})("keyup.enter",function(){return r.RegisterUser()}),e.qZA(),e.qZA(),e.YNc(31,U,2,1,"div",15),e.qZA(),e.TgZ(32,"div",10),e.TgZ(33,"label",22),e._uU(34,"Confirmar contrase\xf1a"),e.qZA(),e.TgZ(35,"div",12),e._UZ(36,"i",20),e.TgZ(37,"input",23),e.NdJ("keyup.enter",function(){return r.RegisterUser()}),e.qZA(),e.qZA(),e.YNc(38,B,3,2,"div",15),e.qZA(),e.qZA(),e.TgZ(39,"div",24),e.TgZ(40,"a",25),e._uU(41,"\xbfOlvido su contrase\xf1a?"),e.qZA(),e.qZA(),e.TgZ(42,"div",26),e._uU(43," \xbfYa tienes cuenta? "),e.TgZ(44,"a",25),e._uU(45,"Inicia sesi\xf3n aqu\xed"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",27),e.TgZ(47,"button",28),e.NdJ("click",function(){return r.RegisterUser()}),e.YNc(48,G,2,0,"span",29),e.YNc(49,J,2,0,"span",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){let i,u,g,v;e.xp6(10),e.Q6J("formGroup",r.registerForm),e.xp6(7),e.Q6J("ngIf",(null==(i=r.form.GetFormControlByName(r.registerForm,"name"))?null:i.touched)&&(null==(i=r.form.GetFormControlByName(r.registerForm,"name"))?null:i.errors)),e.xp6(7),e.Q6J("ngIf",(null==(u=r.form.GetFormControlByName(r.registerForm,"email"))?null:u.touched)&&(null==(u=r.form.GetFormControlByName(r.registerForm,"email"))?null:u.errors)),e.xp6(7),e.Q6J("ngIf",(null==(g=r.form.GetFormControlByName(r.registerForm,"password"))?null:g.touched)&&(null==(g=r.form.GetFormControlByName(r.registerForm,"password"))?null:g.errors)),e.xp6(7),e.Q6J("ngIf",(null==(v=r.form.GetFormControlByName(r.registerForm,"confirmPassword"))?null:v.touched)&&(null==(v=r.form.GetFormControlByName(r.registerForm,"confirmPassword"))?null:v.errors)),e.xp6(2),e.s9C("href",r.GetRecoverPasswordRoute(),e.LSH),e.xp6(4),e.s9C("href",r.GetLoginRoute(),e.LSH),e.xp6(3),e.Q6J("disabled",r.loading.creating),e.xp6(1),e.Q6J("ngIf",!r.loading.creating),e.xp6(1),e.Q6J("ngIf",r.loading.creating)}},directives:[o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,f.O5],styles:[".card[_ngcontent-%COMP%]{background-color:#fff8;box-shadow:none!important}"]}),t})()}];let Y=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[o.u5,f.ez,m.A0,o.UX,C.zk.forRoot(),_.Bz.forChild(k)]]}),t})()},830:(T,d,a)=>{a.d(d,{o:()=>C});var f=a(7537);function _(m){return e=>e.value&&m!=e.value?{matchstring:m}:null}var o=a(1514);let C=(()=>{class m{constructor(){this.emailRegex=/^[a-zA-Z\xf10-9!#$%&'*+.\-/=?^_`{|}~]{1,}@{1}([a-z]){1,}\.[a-z]{2,}$/,this.emailOrCodeRegex=/(^[0-9]{4}$)|(^[a-zA-Z\xf10-9!#$%&'*+.\-/=?^_`{|}~]{1,}@{1}([a-z]){1,}\.[a-z]{2,}$)/}GetFormControlByName(l,p){return l.controls.hasOwnProperty(p)?l.get(p):null}ResetForm(l){l.reset()}ClearFormControls(l){for(const p in l.controls)Object.prototype.hasOwnProperty.call(l.controls,p)&&l.removeControl(p)}FormatControlName(l=""){return l.replace(/ /gi,"_").toUpperCase()}OnPasswordChange(l,p,h){const Z=this.GetFormControlByName(l,p),c=this.GetFormControlByName(l,h);null!=Z&&null!=c&&(c.setValidators([f.kI.required,_(Z.value)]),c.updateValueAndValidity({onlySelf:!0}))}}return m.\u0275fac=function(l){return new(l||m)},m.\u0275prov=o.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()}}]);