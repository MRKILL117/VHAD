"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[573],{2573:(C,f,a)=>{a.r(f),a.d(f,{UserAttentionModule:()=>x});var g=a(6019),v=a(9845),r=a(7537),t=a(1514),u=a(9299),p=a(7754),l=a(6588),c=a(830);function A(e,s){1&e&&(t.TgZ(0,"span",20),t._uU(1," Campo obligatorio "),t.qZA())}function h(e,s){1&e&&(t.TgZ(0,"span",20),t._uU(1," M\xednimo 4 caracteres "),t.qZA())}function d(e,s){1&e&&(t.TgZ(0,"span",20),t._uU(1," M\xe1ximo 30 caracteres "),t.qZA())}function Z(e,s){if(1&e&&(t.TgZ(0,"div",18),t.YNc(1,A,2,0,"span",19),t.YNc(2,h,2,0,"span",19),t.YNc(3,d,2,0,"span",19),t.qZA()),2&e){const o=t.oxw();let n,i,m;t.xp6(1),t.Q6J("ngIf",null==(n=o.form.GetFormControlByName(o.attentionForm,"subject"))||null==n.errors?null:n.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=o.form.GetFormControlByName(o.attentionForm,"subject"))||null==i.errors?null:i.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==(m=o.form.GetFormControlByName(o.attentionForm,"subject"))||null==m.errors?null:m.errors.maxlength)}}function F(e,s){1&e&&(t.TgZ(0,"span",20),t._uU(1," Campo obligatorio "),t.qZA())}function _(e,s){1&e&&(t.TgZ(0,"span",20),t._uU(1," M\xednimo 10 caracteres "),t.qZA())}function U(e,s){1&e&&(t.TgZ(0,"span",20),t._uU(1," M\xe1ximo 150 caracteres "),t.qZA())}function T(e,s){if(1&e&&(t.TgZ(0,"div",18),t.YNc(1,F,2,0,"span",19),t.YNc(2,_,2,0,"span",19),t.YNc(3,U,2,0,"span",19),t.qZA()),2&e){const o=t.oxw();let n,i,m;t.xp6(1),t.Q6J("ngIf",null==(n=o.form.GetFormControlByName(o.attentionForm,"comment"))||null==n.errors?null:n.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=o.form.GetFormControlByName(o.attentionForm,"comment"))||null==i.errors?null:i.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==(m=o.form.GetFormControlByName(o.attentionForm,"comment"))||null==m.errors?null:m.errors.maxlength)}}function y(e,s){1&e&&(t.TgZ(0,"span"),t._UZ(1,"i",21),t.qZA())}function N(e,s){1&e&&(t.TgZ(0,"span"),t._UZ(1,"i",22),t.qZA())}const I=[{path:"",component:(()=>{class e{constructor(o,n,i,m){this.role=o,this.http=n,this.toast=i,this.form=m,this.loading={creating:!1},this.attentionForm=new r.cw({subject:new r.NI("",[r.kI.required,r.kI.minLength(4),r.kI.maxLength(30)]),comment:new r.NI("",[r.kI.required,r.kI.minLength(10),r.kI.maxLength(150)]),userId:new r.NI(null,[])}),this.user=this.role.GetUser(),this.attentionForm.controls.userId.setValue(this.user?this.user.id:0)}ngOnInit(){}CreateHelpRequest(){if(!this.attentionForm.valid)return this.toast.ShowDefaultWarning("Favor de llenar los campos correctamente","Formulario incompleto"),void this.attentionForm.markAllAsTouched();this.loading.creating=!0,this.http.Post("UserAttentions",{userAttention:this.attentionForm.value}).subscribe(n=>{this.toast.ShowDefaultSuccess("Solicitud de ayuda enviada"),this.form.ResetForm(this.attentionForm),this.loading.creating=!1},n=>{console.error("Error al crear solicitud de ayuda",n),this.toast.ShowDefaultDanger("Error al enviar la solicitud"),this.loading.creating=!1})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.N),t.Y36(p.O),t.Y36(l.k),t.Y36(c.o))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-user-attention"]],decls:27,vars:6,consts:[[1,"row","mt-3","mb-4"],[1,"col-12","view-title","d-flex","justify-content-between","align-items-center"],[1,"d-inline-block"],[1,"row","justify-content-center"],[1,"col-12","col-sm-10","col-md-8","col-lg-6"],[1,"card"],[1,"card-header"],[1,"card-title","text-center"],[1,"card-body"],[3,"formGroup"],[1,"form-group"],["for","subject"],["type","text","name","subject","formControlName","subject","placeholder","Asunto del problema",1,"form-control"],["class","error-messages",4,"ngIf"],["rows","10","formControlName","comment","placeholder","Breve descripcion del problema",1,"form-control"],[1,"card-footer","text-right"],[1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"],[1,"error-messages"],["class","d-block",4,"ngIf"],[1,"d-block"],[1,"zmdi","zmdi-mail-send","ml-1"],[1,"zmdi","zmdi-spinner","zmdi-hc-spin","ml-1"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3," Atenci\xf3n al cliente "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"h3",7),t._uU(9,"Solicitar ayuda"),t.qZA(),t.qZA(),t.TgZ(10,"div",8),t.TgZ(11,"form",9),t.TgZ(12,"div",10),t.TgZ(13,"label",11),t._uU(14,"Asunto"),t.qZA(),t._UZ(15,"input",12),t.YNc(16,Z,4,3,"div",13),t.qZA(),t.TgZ(17,"div",10),t.TgZ(18,"label",11),t._uU(19,"Descripci\xf3n del problema"),t.qZA(),t._UZ(20,"textarea",14),t.YNc(21,T,4,3,"div",13),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",15),t.TgZ(23,"button",16),t.NdJ("click",function(){return n.CreateHelpRequest()}),t._uU(24," Enviar "),t.YNc(25,y,2,0,"span",17),t.YNc(26,N,2,0,"span",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){let i,m;t.xp6(11),t.Q6J("formGroup",n.attentionForm),t.xp6(5),t.Q6J("ngIf",(null==(i=n.form.GetFormControlByName(n.attentionForm,"subject"))?null:i.touched)&&(null==(i=n.form.GetFormControlByName(n.attentionForm,"subject"))?null:i.errors)),t.xp6(5),t.Q6J("ngIf",(null==(m=n.form.GetFormControlByName(n.attentionForm,"comment"))?null:m.touched)&&(null==(m=n.form.GetFormControlByName(n.attentionForm,"comment"))?null:m.errors)),t.xp6(2),t.Q6J("disabled",n.loading.creating),t.xp6(2),t.Q6J("ngIf",!n.loading.creating),t.xp6(1),t.Q6J("ngIf",n.loading.creating)}},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,g.O5],styles:[""]}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[r.u5,g.ez,r.UX,v.Bz.forChild(I)]]}),e})()},830:(C,f,a)=>{a.d(f,{o:()=>t});var g=a(7537);function v(u){return p=>p.value&&u!=p.value?{matchstring:u}:null}var r=a(1514);let t=(()=>{class u{constructor(){this.emailRegex=/^[a-zA-Z\xf10-9!#$%&'*+.\-/=?^_`{|}~]{1,}@{1}([a-z]){1,}\.[a-z]{2,}$/,this.emailOrCodeRegex=/(^[0-9]{4}$)|(^[a-zA-Z\xf10-9!#$%&'*+.\-/=?^_`{|}~]{1,}@{1}([a-z]){1,}\.[a-z]{2,}$)/}GetFormControlByName(l,c){return l.controls.hasOwnProperty(c)?l.get(c):null}ResetForm(l){l.reset()}ClearFormControls(l){for(const c in l.controls)Object.prototype.hasOwnProperty.call(l.controls,c)&&l.removeControl(c)}FormatControlName(l=""){return l.replace(/ /gi,"_").toUpperCase()}OnPasswordChange(l,c,A){const h=this.GetFormControlByName(l,c),d=this.GetFormControlByName(l,A);null!=h&&null!=d&&(d.setValidators([g.kI.required,v(h.value)]),d.updateValueAndValidity({onlySelf:!0}))}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275prov=r.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);