"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[590],{3854:(b,p,d)=>{d.r(p),d.d(p,{AttendOrderModule:()=>k});var s=d(6019),g=d(9845),f=d(7537),Z=d(6250),e=d(1514),a=d(7754),n=d(3149),l=d(754),v=d(6588),_=d(8036);function m(r,i){if(1&r&&(e.TgZ(0,"div",14),e.TgZ(1,"div",15),e.TgZ(2,"div",16),e.TgZ(3,"b"),e._uU(4,"Usuario"),e.qZA(),e.qZA(),e.TgZ(5,"div",16),e._uU(6),e.qZA(),e.TgZ(7,"div",16),e.TgZ(8,"b"),e._uU(9,"Direcci\xf3n"),e.qZA(),e.qZA(),e.TgZ(10,"div",16),e._uU(11),e.qZA(),e.TgZ(12,"div",17),e._uU(13),e.qZA(),e.TgZ(14,"div",18),e._uU(15),e.qZA(),e.qZA(),e.qZA()),2&r){const t=e.oxw();e.xp6(6),e.lnq(" ",t.order.user.name," - ",t.order.user.email," - ",t.order.user.cellphone?t.order.user.cellphone:"Sin n\xfamero registrado"," "),e.xp6(5),e.hij(" ",t.GetStreetAddress(t.order.address)," "),e.xp6(2),e.AsE(" ",null!=t.order.address&&t.order.address.colony?null==t.order.address?null:t.order.address.colony:"Sin colonia"," - ",null!=t.order.address&&t.order.address.postalCode?null==t.order.address?null:t.order.address.postalCode:"45819"," "),e.xp6(2),e.hij(" ",null==t.order.address?null:t.order.address.references," ")}}function h(r,i){if(1&r&&e._UZ(0,"img",31),2&r){const t=e.oxw().$implicit,o=e.oxw(2);e.Q6J("src",o.file.GenerateFileURL(t.images[0].partialURL),e.LSH)("alt",t.images[0].name)}}function T(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const c=e.oxw().$implicit;return e.oxw(2).TogglePackedProduct(c)}),e._uU(1," Empaquetar "),e._UZ(2,"i",33),e.qZA()}}function x(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const c=e.oxw().$implicit;return e.oxw(2).TogglePackedProduct(c)}),e._uU(1," Desempaquetar "),e._UZ(2,"i",35),e.qZA()}}function O(r,i){if(1&r&&(e.TgZ(0,"div",20),e.TgZ(1,"div",21),e.TgZ(2,"div",22),e.YNc(3,h,1,2,"img",23),e.qZA(),e.TgZ(4,"div",24),e.TgZ(5,"div",25),e.TgZ(6,"label",26),e._uU(7,"Clave"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"div",25),e.TgZ(10,"label",26),e._uU(11,"Nombre"),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"div",27),e.TgZ(14,"label",26),e._uU(15,"Cantidad"),e.qZA(),e._uU(16),e.qZA(),e.TgZ(17,"div",28),e.YNc(18,T,3,0,"button",29),e.YNc(19,x,3,0,"button",30),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&r){const t=i.$implicit;e.xp6(3),e.Q6J("ngIf",null==t||null==t.images?null:t.images.length),e.xp6(5),e.hij(" ",t.key," "),e.xp6(4),e.hij(" ",t.name," "),e.xp6(4),e.hij(" ",t.quantity," "),e.xp6(2),e.Q6J("ngIf",!t.packed),e.xp6(1),e.Q6J("ngIf",t.packed)}}function C(r,i){if(1&r&&(e.ynx(0),e.YNc(1,O,20,6,"div",19),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.order.products)}}const y=[{path:"",component:(()=>{class r{constructor(t,o,c,u,A){this.activeRoute=t,this.http=o,this.file=c,this.router=u,this.toast=A,this.orderId=0,this.order=null,this.loading={getting:!1}}ngOnInit(){this.activeRoute.params.subscribe(t=>{this.orderId=Number(t.orderId),this.GetOrder()})}GetStreetAddress(t){if(!t)return"P. Sherman calle wallaby #42 Sidney";let o=`${t.street} #${t.externalNumber}`;return t.internalNumber&&(o=o.concat(` int. ${t.internalNumber}`)),o}GetOrder(){this.loading.getting=!0,this.http.Get(`Orders/${this.orderId}`).subscribe(t=>{this.order=t,this.loading.getting=!1},t=>{console.error("Error al obtener la orden",t),this.loading.getting=!1})}FinishOrder(){this.http.Patch(`Orders/${this.orderId}/SendOrder`,{}).subscribe(t=>{this.toast.ShowDefaultSuccess("Orden actualizada correctamente"),this.router.GoToRoute("pedidos")},t=>{console.error("Error al actualizar la orden",t),this.toast.ShowDefaultDanger(508==t.error.error.errorCode?"El pedido ha sido cancelado":"Error al actualizar orden")})}TogglePackedProduct(t){t.packed=!t.hasOwnProperty("packed")||!t.packed}AllProductsPacked(){return!!this.order&&this.order.products.every(t=>t.packed)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.gz),e.Y36(a.O),e.Y36(n.I),e.Y36(l.c),e.Y36(v.k))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-attend-order"]],decls:21,vars:8,consts:[[1,"row","mt-3","mb-4"],[1,"col-12","view-title","d-flex","justify-content-between","align-items-center"],[1,"d-inline-block"],[1,"clickeable",3,"click"],[1,"zmdi","zmdi-arrow-back"],[1,"btn","btn-success",2,"font-size","1.2rem",3,"disabled","click"],[1,"row"],[1,"col-12","mb-4"],[2,"font-size","1.4rem"],["class","card address-card",4,"ngIf"],[1,"col-12"],[4,"ngIf"],[3,"onSuccess"],["confirmIdentity",""],[1,"card","address-card"],[1,"card-body","pt-0"],[1,"form-group","m-0"],[1,"form-group","m-0",2,"text-transform","uppercase"],[1,"form-group","m-0",2,"max-height","3rem"],["class","col-12 col-xl-6 mb-3",4,"ngFor","ngForOf"],[1,"col-12","col-xl-6","mb-3"],[1,"row","product-card"],[1,"col-12","col-md-6","col-xl-4","d-flex","h-100","align-items-center","px-0"],["class","product-image",3,"src","alt",4,"ngIf"],[1,"col-12","col-md-6","col-xl-8","mt-3","px-4"],[1,"product-info",2,"font-size","1.2rem"],[1,"product-label"],[1,"product-info"],[1,"mb-3"],["class","btn btn-outline-success btn-block",3,"click",4,"ngIf"],["class","btn btn-outline-danger btn-block",3,"click",4,"ngIf"],[1,"product-image",3,"src","alt"],[1,"btn","btn-outline-success","btn-block",3,"click"],[1,"zmdi","zmdi-check","zmdi-hc-lg","ml-2"],[1,"btn","btn-outline-danger","btn-block",3,"click"],[1,"zmdi","zmdi-close","zmdi-hc-lg","ml-2"]],template:function(t,o){if(1&t){const c=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"span",3),e.NdJ("click",function(){return o.router.GoToRoute("pedidos")}),e._UZ(4,"i",4),e.qZA(),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"div",2),e.TgZ(8,"button",5),e.NdJ("click",function(){return e.CHM(c),e.MAs(20).show()}),e._uU(9," Temrinar pedido "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",6),e.TgZ(11,"div",7),e.TgZ(12,"div",8),e._uU(13," Datos "),e.qZA(),e.YNc(14,m,16,7,"div",9),e.qZA(),e.TgZ(15,"div",10),e.TgZ(16,"div",8),e._uU(17," Productos "),e.qZA(),e.qZA(),e.YNc(18,C,2,1,"ng-container",11),e.qZA(),e.TgZ(19,"app-verify-identity-modal",12,13),e.NdJ("onSuccess",function(){return o.FinishOrder()}),e.qZA()}2&t&&(e.xp6(5),e.AsE(" Pedido ",o.orderId?o.orderId:""," - ",o.order?e.xi3(6,5,o.order.creationDate,"dd/MM/yyyy"):""," "),e.xp6(3),e.Q6J("disabled",!o.AllProductsPacked()),e.xp6(6),e.Q6J("ngIf",o.order),e.xp6(4),e.Q6J("ngIf",o.order))},directives:[s.O5,_.S,s.sg],pipes:[s.uU],styles:[".product-image[_ngcontent-%COMP%]{width:100%;max-height:25vh;min-height:200px;object-fit:cover;object-position:center}.product-card[_ngcontent-%COMP%]{border:2px solid black;border-radius:12px;overflow:hidden}.product-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.address-card[_ngcontent-%COMP%]{border:2px solid black;box-shadow:none;border-radius:12px}"]}),r})()}];let k=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[f.u5,s.ez,f.UX,Z.t,g.Bz.forChild(y)]]}),r})()},830:(b,p,d)=>{d.d(p,{o:()=>Z});var s=d(7537);function g(e){return a=>a.value&&e!=a.value?{matchstring:e}:null}var f=d(1514);let Z=(()=>{class e{constructor(){this.emailRegex=/^[a-zA-Z\xf10-9!#$%&'*+.\-/=?^_`{|}~]{1,}@{1}([a-z]){1,}\.[a-z]{2,}$/,this.emailOrCodeRegex=/(^[0-9]{4}$)|(^[a-zA-Z\xf10-9!#$%&'*+.\-/=?^_`{|}~]{1,}@{1}([a-z]){1,}\.[a-z]{2,}$)/}GetFormControlByName(n,l){return n.controls.hasOwnProperty(l)?n.get(l):null}ResetForm(n){n.reset()}ClearFormControls(n){for(const l in n.controls)Object.prototype.hasOwnProperty.call(n.controls,l)&&n.removeControl(l)}FormatControlName(n=""){return n.replace(/ /gi,"_").toUpperCase()}OnPasswordChange(n,l,v){const _=this.GetFormControlByName(n,l),m=this.GetFormControlByName(n,v);null!=_&&null!=m&&(m.setValidators([s.kI.required,g(_.value)]),m.updateValueAndValidity({onlySelf:!0}))}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=f.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);