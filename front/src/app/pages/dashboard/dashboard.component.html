<div class="row">
    <div class="col-12">
        <div class="form-group mt-4">
            <div class="input-container">
                <i class="input-icon zmdi zmdi-search"></i>
                <input class="form-control" type="text" placeholder="¿Qué está buscando?"
                maxlength="30"
                [(ngModel)]="txtToFilter" (input)="SetSearchTrigger()">
            </div>
        </div>
    </div>
</div>

<ng-container *ngIf="!loading.getting; else bigLoading">
    <div class="row mt-3" *ngIf="productsOffered?.length; else noItems">
        <!-- offers -->
        <div class="col-12 col-sm-6 col-lg-4 col-xl-3 mb-3" *ngFor="let product of productsOffered">
            <div class="card pt-0 px-0 clickeable">
                <div class="card-header p-0 mb-2">
                    <img *ngIf="product?.images?.length" class="card-image"
                    [src]="http.apiBaseUrl + product.images[0].partialURL" [alt]="product.images[0].name">
                    <img style="position: absolute; top: 3px; right: 5px; height: 7vh; min-height: 60px;" src="assets/icons/offer-icon.png">
                </div>
                <div class="card-body py-0">
                    <div class="product-name">
                        {{product.name}}
                    </div>
                    <div class="product-description position-relative" style="font-size: 1rem;">
                        {{product.description}}
                        <div class="product-description-gradient">
                        </div>
                    </div>
                    <div class="text-right product-category">
                        {{product.category?.name}}
                    </div>
                </div>
                <div class="card-footer py-0 text-right">
                    <div class="d-flex justify-content-between h-100 align-items-end">
                        <div style="font-size: 1.6rem; font-weight: bold; color: #888;">
                            <div class="text-left" style="font-size: 1.2rem; text-decoration: line-through;">
                                ${{product.price | number:"1.2-2"}}
                            </div>
                            <div style="color: black;">
                                ${{product.offerPrice | number:"1.2-2"}}
                            </div>
                        </div>
                        <button class="btn btn-warning">
                            <span>
                                Añadir
                            </span>
                            <i class="zmdi zmdi-shopping-cart ml-1"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-container>

<ng-template #bigLoading>
    <div class="row">
        <div class="col-12 col-flex-center">
            <i class="zmdi zmdi-spinner zmdi-hc-5x zmdi-hc-spin"></i>
        </div>
    </div>
</ng-template>

<ng-template #noItems>
    <div class="w-100 text-center" style="font-size: 1.5rem; font-weight: bold;">
        <span *ngIf="txtToFilter || categoryToFilter">No se encontraron coincidencias para "{{txtToFilter}}"</span>
    </div>
</ng-template>

<app-footer *ngIf="!loading.getting"></app-footer>